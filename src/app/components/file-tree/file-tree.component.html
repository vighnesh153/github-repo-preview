<div class="tree">
  <div class="current-content">
    <div class="expand-icon">
      <ng-template [ngIf]="isDir && isExpanded === false"
                   [ngIfThen]="caretRight"></ng-template>
      <ng-template [ngIf]="isDir && isExpanded"
                   [ngIfThen]="caretDown"></ng-template>
    </div>
    <div class="file-name" (click)="openRegularFile()">{{ fileName }}</div>
  </div>
  <div *ngIf="isDir"
       [ngClass]="{
          'no-display': isExpanded === false
       }"
  >
    <app-file-tree
      *ngFor="let content of contents"
      [isDir]="content.type === 'dir'"
      [contentsUrl]="content.url"
      [downloadUrl]="content.download_url"
      [fileName]="content.name"
    ></app-file-tree>
  </div>
</div>

<ng-template #caretRight>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512" (click)="expandTree()">
    <path fill="currentColor" d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path>
  </svg>
</ng-template>

<ng-template #caretDown>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" (click)="collapseTree()">
    <path fill="currentColor" d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"></path>
  </svg>
</ng-template>
